import{r as l,j as e,L as E,z as N,A as _,B as q,g as w}from"./index-a4d01ccf.js";import{u as y}from"./Layout-30470baa.js";import{c as F,a,d as c,u as A,b as T,o as I}from"./yup-e23b827f.js";import{I as L,_ as u}from"./index-d922ad90.js";import{g as m}from"./localStorage-0825b3d6.js";import{u as p}from"./useQuery-ccf0f894.js";import"./utils-afa34e80.js";function S(){const[i,h]=l.useState(m()),{isLoading:D,isError:R,data:n,error:H}=p(["estadosreserva"],N),{isLoading:P,isError:U,data:d,error:$}=p(["tipoeventos"],_),f={fecha:"",hora_inicio:"",hora_fin:"",descripcion:"",estado_reserva:0,tipo_evento:0},x=F({fecha:a().required("Nombre de usuario es requerido").max(10,"el nomnre es muy largo"),hora_inicio:a().required("ContraseÃ±a es requerida"),hora_fin:a().required("Email es requerido"),descripcion:a().required("Ingrese una descripcion"),tipo_evento:c().required("Apellidos es requerido"),estado_reserva:c().required("Estado de reserva es requerido")}),{register:s,handleSubmit:b,formState:{errors:o},reset:v}=A({defaultValues:f,resolver:I(x)}),t=T(q,{onSuccess:r=>{console.log(r),v(),u.success("Evento agregado",{duration:5e3})},onError:r=>{console.log(r),u.error("No registrado..",{duration:5e3})}}),j=r=>{console.log(r);try{r.user=i.user_id,console.log(r),t.mutate(r)}catch(g){console.log(g)}};return l.useEffect(()=>{h(m())},[]),e.jsxs("div",{className:"card w-full p-6 bg-base-100 shadow-xl mt-2",children:[e.jsxs("form",{onSubmit:b(j),children:[e.jsxs("div",{className:"form-control w-full mb-4",children:[e.jsx("label",{className:"label",htmlFor:"fecha",children:"Fecha"}),e.jsx("input",{className:"input input-bordered w-full",id:"fecha",type:"date",...s("fecha",{required:!0})}),e.jsx("span",{className:"errors",children:o.fecha&&"Fecha es requerida"})]}),e.jsxs("div",{className:"form-control w-full mb-4",children:[e.jsx("label",{className:"label",htmlFor:"hora_inicio",children:"Hora de inicio"}),e.jsx("input",{className:"input input-bordered w-full",id:"hora_inicio",type:"time",...s("hora_inicio",{required:!0})}),e.jsx("span",{className:"errors",children:o.hora_inicio&&"Ingrese hora de inicio"})]}),e.jsxs("div",{className:"form-control w-full mb-4",children:[e.jsx("label",{className:"label",htmlFor:"hora_fin",children:"Hora Fin"}),e.jsx("input",{className:"input input-bordered w-full",id:"hora_fin",type:"time",...s("hora_fin",{required:!0})}),e.jsx("span",{className:"errors",children:o.hora_fin&&"Ingrese hora de inicio"})]}),e.jsxs("div",{className:"form-control w-full mb-4",children:[e.jsx("label",{className:"label",htmlFor:"descripcion",children:"Descripcion"}),e.jsx("input",{className:"input input-bordered w-full",id:"descripcion",type:"text",placeholder:"Escriba una descripcion",...s("descripcion")}),e.jsx("span",{className:"errors",children:o.descripcion&&"Ingrese una descripcion"})]}),e.jsxs("div",{className:"form-control w-full mb-4",children:[e.jsx("label",{className:"label",htmlFor:"tipo_evento",children:"Tipo de evento"}),e.jsxs("select",{className:"select select-bordered w-full",id:"tipo_evento",...s("tipo_evento",{required:!0}),children:[e.jsx("option",{disabled:!0,selected:!0,children:"Elija Tipo de evento"}),d&&d.map(r=>e.jsxs("option",{value:r.id,children:[r.nombre,", ",r.precio," Bs."]},r.id))]}),e.jsx("span",{className:"errors",children:o.tipo_evento&&"Elija un Tipo de evento"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{className:"label",htmlFor:"estado_reserva",children:"Estado"}),e.jsxs("select",{className:"select select-bordered w-full",id:"estado_reserva",...s("estado_reserva",{required:!0}),children:[e.jsx("option",{disabled:!0,selected:!0,children:"Elija un estado"}),n&&n.map(r=>e.jsx("option",{value:r.id,children:r.nombre},r.id))]}),e.jsx("span",{className:"errors",children:o.estado_reserva&&"Elija un estado de reserva."})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[t.isLoading?"Agregando evento...":e.jsxs(e.Fragment,{children:[t.isError?e.jsx("div",{children:"error al agregar.."}):null,e.jsx("button",{className:"text-white bg-teal-800 border-teal-800 shadow-md hover:text-teal-900 hover:bg-gray-100 hover:border-2 btn",type:"submit",children:"Guardar"})]}),e.jsx(E,{to:"/app/calendar",className:"text-gray-600 border-2 border-gray-600 shadow-md hover:text-gray-100 hover:bg-gray-600 btn",type:"button",children:"Atras"})]})]}),e.jsx(L,{})]})}function V(){const i=y();return l.useEffect(()=>{i(w({title:"Agregar Evento"}))}),e.jsx(S,{})}export{V as default};
